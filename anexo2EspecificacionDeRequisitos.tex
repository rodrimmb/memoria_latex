\section{Introducción}
Este anexo cumple dos funciones. Primero, recoger todos los requisitos del sistema software a construir, de manera que sirve de contrato entre el cliente y los desarrolladores. Segundo, representar los requisitos de forma gráfica y textual, presentando los diferentes enfoques del sistema.

Estos requisitos son especificados por el tutor del proyecto que asume el rol de cliente, debe especificar la funcionalidad de la aplicación.

Este documento expone el análisis del sistema que se va a crear, mediante una descripción completa del comportamiento del mismo. Se describirá lo que el sistema debe ser capaz de hacer, pero no como debe hacerlo.










\section{Objetivos del proyecto}
Los objetivos principales que se han establecido son:

\begin{itemize}
  \item Creación de un servidor al que se le pase información de los nodos de un árbol de búsqueda en espacio de estados y devuelve el resultado de la búsqueda realizada con el algoritmo A estrella, describiendo los pasos que ha dado para encontrar la solución.
  \item Creación de una web en la que se introduzcan los datos con los que trabaja el servidor y interprete de forma dinámica e intuitiva los datos que nos proporciona el servidor.
\end{itemize}

Hay que resaltar que en el lado del servidor usaremos un Servicio Web con una API REST, de tal forma que cualquiera que respete el formato de los datos que interpreta el servidor, podrá usar nuestro servicio, ya sea desde una web, un móvil o una aplicación de escritorio.











\section{Usuarios participantes}
En el proyecto han participado dos usuarios ambos han tenido al menos un rol o varios, para establecer los requisitos del proyecto.

César Ignacio García Osorio, tutor del proyecto, ha asumido diversos roles durante el proceso:

\begin{itemize}
  \item Como cliente, ha participado en la definición de los objetivos del proyecto. Ha dirigido los resultados del proyecto ya que el crea y mantiene la lista priorizada con los requisitos necesarios para cubrir los objetivos del proyecto, reparte los objetivos/requisitos en iteraciones y establece un calendario de entregas.
  
  \item Como técnico, ha aportado sus conocimientos para la resolución de los problemas que han surgido a lo largo del proyecto. También ha recomendado documentación para consultar.
  
\end{itemize}

Por último, me incluyo como analista y desarrollador. Encargado de analizar y describir el problema propuesto por el cliente y realizar el diseño de la solución propuesta.












\section{Factores de riesgo}
En este apartado describiremos las partes del proyecto que por sus características hacen que la realización del mismo pueda no ser llevada a cabo. Hay que tener en cuenta los riesgos, para poder anticiparnos a ellos para poder tener un plan cuando nos enfrentemos a ellos y no influyan en el desarrollo del proyecto de una forma significativa.

\begin{itemize}
 \item \textit{Falta de conocimiento}: la primera dificultad encontrada es el desconocimiento de la práctica totalidad de las herramientas que van a ser usadas para realizar el proyecto. El proyecto se inicia como un reto, la posibilidad de poder aprender a usar nuevas y modernas herramientas hasta ahora no usadas durante todo el máster plantea una motivación extra.
 
 \item \textit{Nuevo sistema de composición de texto}: gracias a las recomendaciones del tutor para la documentación se va a utilizar \LaTeX{}, debido a la nula experiencia con esta herramienta la carga de trabajo de la parte de documentación se vera incrementada. Pero gracias al uso de esta herramienta se lograr una apariencia más sólida y profesional.
 
 \item \textit{Desarrollo en solitario}: hasta ahora los proyectos realizados se habían implementado en equipo, el enfrentarse en solitario a este desarrollo será una dificultad añadida.
 
 \item \textit{Dedicación parcial}: debido a mi situación laboral actual la dedicación al proyecto no va a poder ser plena. 

\end{itemize}

Para la creación de la aplicación sera necesaria una gran labor de investigación de las herramientas y su documentación que esta en su mayoría exclusivamente en inglés. Además se deberán aplicar los conocimientos de inteligencia artificial adquiridos en el máster. Todo esto hará posible superar todos los riesgos identificados y que concluyan con la superación de los objetivos marcados en los plazos establecidos.
















\section{Catálogo de requisitos del sistema}
En este apartado se especifican todos los requisitos del sistema, definiendo las funcionalidades y restricciones del mismo.

\subsection{Objetivos funcionales}
Una de las características más importante que debe cumplir la aplicación es la facilidad de uso. Dado que su empleo está, principalmente, orientado a la docencia 	debe ser fácil de usar y posibilitar el seguir los algoritmos paso a paso. Asimismo, tratará de facilitar que el usuario final pueda asimilar, de manera sencilla, los conceptos.

La aplicación permitirá crear y borrar búsquedas desde la página de inicio, una vez dentro de estas búsquedas se podrán añadir los nodos, con las relaciones que existen entre ellos y toda la información necesaria que conforman la búsqueda. En tiempo real se irá viendo cómo se genera el árbol de búsqueda.

Una vez añadida la información de los nodos se podrá ver en una tabla todos los nodos con su información, si pasamos a la pestaña de al lado podremos resolver la búsqueda. En la pestaña de resolución de las búsquedas podemos decidir cómo queremos resolver:

\begin{itemize}
 \item \textit{Resolver paso a paso} Nos irá mostrando paso a paso las diferentes acciones que realiza el algoritmo hasta el final que nos mostrará la ruta más óptima. En cualquier paso de este tipo de resolución podremos pulsar en resolver y nos mostrará la solución final. También podremos volver a empezar desde el principio en cualquier momento.
 
 \item \textit{Mostrar directamente la solución} En esta opción se nos mostrarán directamente todos los pasos y la solución, pero no veremos cómo ha tomado las decisiones el algoritmo, solo la solución y los pasos.

\end{itemize}

Las soluciones se muestran tanto en una tabla como en un gráfico que representa la búsqueda de forma más visual e intuitiva.

\subsection{Requisitos de usuario}
El usuario deberá ser capaz de generar, eliminar y acceder a las búsquedas. Una vez dentro de una búsqueda podrá añadir nodos y toda la información necesaria de los nodos a estas búsquedas. Podrá ser capaz de ver la información de los nodos en una tabla y en el gráfico y poder ver la solución de la búsqueda tanto en tabla como en el gráfico.

También debe ser capaz de poder cambiar de búsqueda y visualizar toda la información y la solución de cada una de ellas.

\subsection{Requisitos del sistema}
Al tratarse de una aplicación web los requisitos del sistema se verán desde dos perspectivas, la del sistema cliente y la del sistema servidor. Estas dos perspectivas serán diferentes. 

Para el funcionamiento de la aplicación en el cliente, será necesario simplemente contar con un dispositivo con navegador web que soporte JavaScript.

En el lado del servidor es necesario que sea capaz de interpretar código Ruby y pueda correr la base de datos MongoDB. MongoDB tiene ciertas limitaciones para máquinas de 32 bits así pues la configuración mínima recomendada será:

\begin{itemize}
 \item Procesador de doble núcleo de 64 bits
 
 \item 1Gb de RAM
 
 \item Al menos 3Gb de memoria libre en el disco duro

\end{itemize}

En cuanto al sistema operativo, deberá ser posible la ejecución en todos los que exista una versión de Ruby y de MongoDB. Uno de los beneficios de que el proyecto se implemente en un lenguaje interpretado es que maximiza las posibilidades de uso en distintos entornos.



















\section{Especificación de requisitos}
En este apartado se describen detalladamente todos los requisitos del catalogo. Para realizar esta tarea se emplean diagramas y plantillas de casos de uso. Cada caso de uso es una descripción de una secuencia de acciones que se ejecutan en un sistema para producir la salida esperada por un actor.

Se definirán los requisitos inherentes a la tecnología utilizada, los requisitos de información, los requisitos funcionales representados con los casos de uso y los requisito no funcionales.
					
Los casos de uso no gozan de muy buena fama entre los defensores de las metodologías ágiles, como Scrum. Aun así son necesarios para este anexo aunque los casos de uso no van a ser demasiado detallados, ni difíciles de entender por el cliente. 

\subsection{Especificación de requisitos inherentes a la tecnología utilizada}
Son los requisitos dados por la tecnología utilizada en el desarrollo del proyecto.

Se ha elegido el lenguaje de programación Ruby para el desarrollo del proyecto, concretamente la version 2.0.0p353. El primer requisito necesario para poder ejecutar la aplicación será que el terminal tenga instalado un interprete de Ruby.

El otro requisito necesario será tener instalada la base de datos MongoDB que es la base de datos usada en el proyecto. Usaremos la version 2.6.0.

\subsection{Especificación de requisitos de informacion}
En la siguiente tabla se describen los requisitos de información en forma de plantilla.

\tablaSinCabecera{Requisitos de información}{p{3.5cm} p{10cm}}{2}{tablaRequisitosInformacion}{
  \rowcolor[gray]{.8}RI - 01       & Información de los nodos del algoritmo \\\hline
  Descripción                      & Almacena la información de los nodos para la ejecución del algoritmo A estrella \\\hline
  Datos específicos                & Coste del nodo, coste del camino hasta sus hijos \\\hline
  Importancia                      & Alta \\\hline
  Comentarios                      & Al menos hay que dar un nombre y un valor al nodo \\\\
}

\subsection{Requisitos funcionales}
Debido al tamaño del diagrama de casos de uso, y para tener una mejor visualización, se mostrarán dos imágenes, mediante una división lógica por pantallas. Además la definición de los requisitos funcionales servirá de ayuda para el diseño de la herramienta.

En este apartado se describen todos los requisitos identificados para la aplicación:

\begin{enumerate}

\item Visualizar todas las búsquedas: en la página de inicio deben poder verse todas las búsquedas que se hayan creado, listadas en una tabla con su nombre.

\item Crear una búsqueda: al usuario se le debe permitir añadir nuevas búsquedas, además, las búsquedas deben tener un nombre.

\item Seleccionar una búsqueda: el usuario podrá elegir entre las búsquedas, para acceder a la que el desee.

\item Borrar una búsqueda: el usuario podrá eliminar las búsquedas que desee.

\item Añadir nodos a una búsqueda: una vez que el usuario haya accedido a una búsqueda, podrá añadir nodos con toda la información deseada a la búsqueda a la que ha accedido. 

\item Visualizar los nodos en una tabla: los nodos asociados a una búsqueda se visualizarán en una tabla.

\item Visualizar los nodos en un grafo: los nodos asociados a una búsqueda se visualizarán en un grafo.

\item Poder resolver el problema: el usuario debe poder resolver pulsando un solo botón el problema de una vez. 

\item Visualizar la solución a la búsqueda en una tabla: el usuario debe poder ver los pasos que se han dado y la solución en una tabla.

\item Visualizar la solución a la búsqueda en un grafo: el usuario debe poder ver la ruta de la solución en un grafo.

\item Poder resolver la búsqueda paso a paso: el usuario debe poder resolver paso a paso la búsqueda pulsando un botón.

\item Visualizar la solución paso a paso en una tabla: el usuario debe poder ver los pasos que se están dando y la solución paso a paso en una tabla.

\item Visualizar la solución paso a paso en un grafo: el usuario debe poder ver los pasos que se están dando y la solución paso a paso en el grafo.

\end{enumerate}

\figuraConPosicion{.9}{imgs/caso_uso_main.png}{Casos de uso de la página inicial}{casosUsoIndex}{}{H}

\figuraConPosicion{.9}{imgs/caso_uso_work_space.png}{Casos de uso de la página de trabajo}{casosUsoWorkSpace}{}{H}

\subsection{Relación entre los casos de uso y \en{backlog items}}
Aunque los casos de uso no gozan de buena reputación entre la comunidad ágil, ya que el objetivo de los casos de uso queda sobradamente representado en las historias de usuario, si que los usaremos en este proyecto para facilitar nuestro análisis y mejorar la comprensión del funcionamiento del sistema por parte de los lectores de esta memoria. 

En la tabla \vertabla{tablaCasosDeUsoScrum} podemos ver la relación entre los casos de uso y las historias de usuario del \en{Product Backlog} del Anexo I \vertabla{productBacklog}


\tablaSmall{Comparativa entre casos de uso e historias Scrum}{p{6cm} c c c c c c c c c }{tablaCasosDeUsoScrum}{
  \backslashbox{Casos de uso}{Backlog items} & T01 & T02 & T03 & T04 & T05 & T06 & T07 & T08 \\
 }
 {
  RF1 Visualizar todas las búsquedas                                           &   &   &   & X & X &   &  &   \\
  RF2 Crear una búsqueda                                                       &   &   &   & X & X &   &  &   \\
  RF3 Seleccionar una búsqueda                                                 &   &   &   & X &   &   &  &   \\
  RF4 Borrar una búsqueda                                                      &   &   &   & X & X &   &  &   \\
  RF5 Añadir nodos a una búsqueda                                              & X &   & X & X & X &   &  &   \\
  RF6 Visualizar los nodos en una tabla                                        &   &   & X & X &   &   &  &   \\
  RF7 Visualizar los nodos en un grafo                                         &   &   & X & X &   &   &  &   \\
  RF8 Poder resolver el problema                                               & X & X &   & X & X &   &  &   \\
  RF9 Visualizar la solución a la búsqueda en una tabla                        &   & X &   & X &   &   &  &   \\
  RF10 Visualizar la solución a la búsqueda en un grafo                        &   & X &   & X &   &   &  &   \\
  RF11 Poder resolver la búsqueda paso a paso                                  & X & X &   & X &   &   &  &   \\
  RF12 Visualizar la solución paso a paso en una tabla                         &   & X &   & X &   &   &  &   \\
  RF13 Visualizar la solución paso a paso en un grafo                          &   & X &   & X &   &   &  &   \\
}



















\section{Interfaz de usuario}
En este apartado se explicará como se ha diseñado la interfaz. El objetivo es que la aplicación sea lo más atractiva que se pueda y, además, hacer que la interacción con el usuario sea lo más intuitiva posible, esto es conocido como el diseño centrado en el usuario.

La interfaz gráfica de usuario requiere un tratamiento especial y un análisis en profundidad para hacer de la aplicación una herramienta útil y con aplicación docente.


\subsection{Interfaz gráfica de usuario}

\subsubsection*{Prototipos}
Desde el principio teníamos claro que habría dos pantallas. En la primera pantalla se mostraría un listado con las búsquedas y un botón para añadir nuevas búsquedas y en la segunda se podría añadir y ver los datos que usa el algoritmo el algoritmo y además se podría ver la solución.

En este primer prototipo de la interfaz muestra como queríamos que fuera la interfaz de usuario en un primer momento, aunque al final el diseño cambio ligeramente. En la pantalla de inicio \ver{inicioProto} vemos que hay una lista con las búsquedas del usuario y un botón para poder añadir más búsquedas.

\figuraConPosicion{1}{imgs/proto_home.png}{Prototipo de la interfaz de la pantalla de inicio}{inicioProto}{}{H}

En la segunda imagen \ver{workProto} del prototipo mostramos como pensamos en dividir la pantalla en dos secciones, la parte izquierda mostraría toda la información de la búsqueda en tablas. La parte derecha se dividiría en otras dos partes a su vez, en la parte superior, que ocuparía mucho menos espacio que la parte inferior, estarían los botones para añadir nodos y resolver el problema, tanto de una vez como paso a paso. Además debajo de la botonera se vería la ruta a la solución de la búsqueda. En la sección inferior de la parte derecha estaría reservada para mostrar el grafo del árbol de búsqueda.

\figuraConPosicion{1}{imgs/proto_work_space.png}{Prototipo de la interfaz de la pantalla de trabajo}{workProto}{}{H}



\subsubsection*{Interfaz final}
Finalmente, en esta parte, vamos a ver como ha quedado la interfaz definitiva con unas capturas de la aplicación, y explicaremos los cambios que hemos realizado respecto a los prototipos.

En la página inicial \ver{inicioFinal} vemos como la página de inicio se ha ajustado mucho al diseño original, solo se ha añadido un encabezado que explica de forma breve el objetivo de la web.
 
\figuraConPosicion{1}{imgs/final_inicio.png}{Página de inicio}{inicioFinal}{}{H}

Ahora vamos a pasar a explicar la parte de la web más interactiva, yo la denomino el espacio de trabajo o \en{work space}. Esta es la parte con mayor cambio respecto del prototipo inicial. En el prototipo teníamos dos tablas una encima de otra con toda la información de la búsqueda, tanto nodos como pasos para resolver la búsqueda con el algoritmo A estrella. Finalmente optamos por modificar esta distribución y hacer que cada tabla estuviera en una pestaña diferente con botones propios de su función.

En la pestaña nodos \ver{pestañaNodos} podemos ver los nodos que tiene esa búsqueda y dos botones a la izquierda: uno para añadir más nodos y otro para recargar los nodos. El botón de la derecha es común a las dos pestañas y sirve para recargar el grafo. Si pulsamos el botón de añadir nodo se nos desplegará la ventana modal \ver{ventanaModal} de la figura y podremos añadir más nodos.

\figuraConPosicion{1}{imgs/final_nodos.png}{Página de trabajo, pestaña de nodos}{pestañaNodos}{}{H}
\figuraConPosicion{1}{imgs/final_add_nodo.png}{Ventana modal para añadir nodos}{ventanaModal}{}{H}

En la pestaña de solución \ver{pestañaSolucion} vamos a ver en la tabla con los pasos que se han ido siguiendo para obtener la solución y la ruta a la solución en la caja de color verde. En la parte derecha tenemos tres botones, de izquierda a derecha son: 

\begin{itemize}
 \item Limpiar todo: borra la tabla y deja los nodos del grafo en gris. 
 \item Resolver: muestra la tabla con los pasos y la ruta tanto en la caja verde como en el grafo.
 \item Siguiente paso:  va mostrando poco a poco como se resuelve el algoritmo tanto en la tabla como en el grafo.
\end{itemize}

\figuraConPosicion{1}{imgs/final_solucion.png}{Página de trabajo, pestaña de solución}{pestañaSolucion}{}{H}
\figuraConPosicion{1}{imgs/final_solucion_paso.png}{Página de trabajo, pestaña de solución paso a paso}{solucionPaso}{}{H}












